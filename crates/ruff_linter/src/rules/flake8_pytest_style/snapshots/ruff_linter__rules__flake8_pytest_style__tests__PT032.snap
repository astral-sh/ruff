---
source: crates/ruff_linter/src/rules/flake8_pytest_style/mod.rs
---
PT032.py:18:5: PT032 [*] Use context-manager form of `pytest.raises()`
   |
17 | def test_error_trivial():
18 |     pytest.raises(ZeroDivisionError, func, 1, b=0)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT032
   |
   = help: Rewrite `pytest.raises()` in a context-manager form

ℹ Unsafe fix
15 15 | 
16 16 | 
17 17 | def test_error_trivial():
18    |-    pytest.raises(ZeroDivisionError, func, 1, b=0)
   18 |+    with pytest.raises(ZeroDivisionError):
   19 |+        func(1, b=0)
19 20 | 
20 21 | 
21 22 | def test_error_match():

PT032.py:22:5: PT032 [*] Use context-manager form of `pytest.raises()`
   |
21 | def test_error_match():
22 |     pytest.raises(ZeroDivisionError, func, 1, b=0).match("division by zero")
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT032
   |
   = help: Rewrite `pytest.raises()` in a context-manager form

ℹ Unsafe fix
19 19 | 
20 20 | 
21 21 | def test_error_match():
22    |-    pytest.raises(ZeroDivisionError, func, 1, b=0).match("division by zero")
   22 |+    with pytest.raises(ZeroDivisionError, match="division by zero"):
   23 |+        func(1, b=0)
23 24 | 
24 25 | 
25 26 | def test_error_assign():

PT032.py:26:15: PT032 [*] Use context-manager form of `pytest.raises()`
   |
25 | def test_error_assign():
26 |     excinfo = pytest.raises(ZeroDivisionError, func, 1, b=0)
   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT032
   |
   = help: Rewrite `pytest.raises()` in a context-manager form

ℹ Unsafe fix
23 23 | 
24 24 | 
25 25 | def test_error_assign():
26    |-    excinfo = pytest.raises(ZeroDivisionError, func, 1, b=0)
   26 |+    with pytest.raises(ZeroDivisionError) as excinfo:
   27 |+        func(1, b=0)
27 28 | 
28 29 | 
29 30 | def test_error_kwargs():

PT032.py:30:5: PT032 [*] Use context-manager form of `pytest.raises()`
   |
29 | def test_error_kwargs():
30 |     pytest.raises(func=func, expected_exception=ZeroDivisionError)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PT032
   |
   = help: Rewrite `pytest.raises()` in a context-manager form

ℹ Unsafe fix
27 27 | 
28 28 | 
29 29 | def test_error_kwargs():
30    |-    pytest.raises(func=func, expected_exception=ZeroDivisionError)
   30 |+    with pytest.raises(ZeroDivisionError):
   31 |+        func()
