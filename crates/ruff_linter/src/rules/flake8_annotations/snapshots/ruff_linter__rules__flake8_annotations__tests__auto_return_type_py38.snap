---
source: crates/ruff_linter/src/rules/flake8_annotations/mod.rs
---
ANN201 [*] Missing return type annotation for public function `func`
 --> auto_return_type.py:1:5
  |
1 | def func():
  |     ^^^^
2 |     return 1
  |
help: Add return type annotation: `int`
  - def func():
1 + def func() -> int:
2 |     return 1
3 | 
4 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
 --> auto_return_type.py:5:5
  |
5 | def func():
  |     ^^^^
6 |     return 1.5
  |
help: Add return type annotation: `float`
2 |     return 1
3 | 
4 | 
  - def func():
5 + def func() -> float:
6 |     return 1.5
7 | 
8 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:9:5
   |
 9 | def func(x: int):
   |     ^^^^
10 |     if x > 0:
11 |         return 1
   |
help: Add return type annotation: `float`
6  |     return 1.5
7  | 
8  | 
   - def func(x: int):
9  + def func(x: int) -> float:
10 |     if x > 0:
11 |         return 1
12 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:16:5
   |
16 | def func():
   |     ^^^^
17 |     return True
   |
help: Add return type annotation: `bool`
13 |         return 1.5
14 | 
15 | 
   - def func():
16 + def func() -> bool:
17 |     return True
18 | 
19 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:20:5
   |
20 | def func(x: int):
   |     ^^^^
21 |     if x > 0:
22 |         return None
   |
help: Add return type annotation: `None`
17 |     return True
18 | 
19 | 
   - def func(x: int):
20 + def func(x: int) -> None:
21 |     if x > 0:
22 |         return None
23 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:27:5
   |
27 | def func(x: int):
   |     ^^^^
28 |     return 1 or 2.5 if x > 0 else 1.5 or "str"
   |
help: Add return type annotation: `Union[str, float]`
1  + from typing import Union
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
25 |         return
26 | 
27 | 
   - def func(x: int):
28 + def func(x: int) -> Union[str, float]:
29 |     return 1 or 2.5 if x > 0 else 1.5 or "str"
30 | 
31 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:31:5
   |
31 | def func(x: int):
   |     ^^^^
32 |     return 1 + 2.5 if x > 0 else 1.5 or "str"
   |
help: Add return type annotation: `Union[str, float]`
1  + from typing import Union
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
29 |     return 1 or 2.5 if x > 0 else 1.5 or "str"
30 | 
31 | 
   - def func(x: int):
32 + def func(x: int) -> Union[str, float]:
33 |     return 1 + 2.5 if x > 0 else 1.5 or "str"
34 | 
35 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 Missing return type annotation for public function `func`
  --> auto_return_type.py:35:5
   |
35 | def func(x: int):
   |     ^^^^
36 |     if not x:
37 |         return None
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `func`
  --> auto_return_type.py:41:5
   |
41 | def func(x: int):
   |     ^^^^
42 |     return {"foo": 1}
   |
help: Add return type annotation

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:45:5
   |
45 | def func(x: int):
   |     ^^^^
46 |     if not x:
47 |         return 1
   |
help: Add return type annotation: `int`
42 |     return {"foo": 1}
43 | 
44 | 
   - def func(x: int):
45 + def func(x: int) -> int:
46 |     if not x:
47 |         return 1
48 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:52:5
   |
52 | def func(x: int):
   |     ^^^^
53 |     if not x:
54 |         return 1
   |
help: Add return type annotation: `Optional[int]`
1  + from typing import Optional
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
50 |         return True
51 | 
52 | 
   - def func(x: int):
53 + def func(x: int) -> Optional[int]:
54 |     if not x:
55 |         return 1
56 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:59:5
   |
59 | def func(x: int):
   |     ^^^^
60 |     if not x:
61 |         return 1
   |
help: Add return type annotation: `Union[str, int, None]`
1  + from typing import Union
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
57 |         return None
58 | 
59 | 
   - def func(x: int):
60 + def func(x: int) -> Union[str, int, None]:
61 |     if not x:
62 |         return 1
63 |     elif x > 5:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:68:5
   |
68 | def func(x: int):
   |     ^^^^
69 |     if x:
70 |         return 1
   |
help: Add return type annotation: `Optional[int]`
1  + from typing import Optional
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
66 |         return None
67 | 
68 | 
   - def func(x: int):
69 + def func(x: int) -> Optional[int]:
70 |     if x:
71 |         return 1
72 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:73:5
   |
73 | def func():
   |     ^^^^
74 |     x = 1
   |
help: Add return type annotation: `None`
70 |         return 1
71 | 
72 | 
   - def func():
73 + def func() -> None:
74 |     x = 1
75 | 
76 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:77:5
   |
77 | def func(x: int):
   |     ^^^^
78 |     if x > 0:
79 |         return 1
   |
help: Add return type annotation: `Optional[int]`
1  + from typing import Optional
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
75 |     x = 1
76 | 
77 | 
   - def func(x: int):
78 + def func(x: int) -> Optional[int]:
79 |     if x > 0:
80 |         return 1
81 | 
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:82:5
   |
82 | def func(x: int):
   |     ^^^^
83 |     match x:
84 |         case [1, 2, 3]:
   |
help: Add return type annotation: `Union[str, int, None]`
1  + from typing import Union
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
80 |         return 1
81 | 
82 | 
   - def func(x: int):
83 + def func(x: int) -> Union[str, int, None]:
84 |     match x:
85 |         case [1, 2, 3]:
86 |             return 1
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:90:5
   |
90 | def func(x: int):
   |     ^^^^
91 |     for i in range(5):
92 |         if i > 0:
   |
help: Add return type annotation: `Optional[int]`
1  + from typing import Optional
2  | def func():
3  |     return 1
4  | 
--------------------------------------------------------------------------------
88 |             return "foo"
89 | 
90 | 
   - def func(x: int):
91 + def func(x: int) -> Optional[int]:
92 |     for i in range(5):
93 |         if i > 0:
94 |             return 1
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
  --> auto_return_type.py:96:5
   |
96 | def func(x: int):
   |     ^^^^
97 |     for i in range(5):
98 |         if i > 0:
   |
help: Add return type annotation: `int`
93 |             return 1
94 | 
95 | 
   - def func(x: int):
96 + def func(x: int) -> int:
97 |     for i in range(5):
98 |         if i > 0:
99 |             return 1
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:104:5
    |
104 | def func(x: int):
    |     ^^^^
105 |     for i in range(5):
106 |         if i > 0:
    |
help: Add return type annotation: `Optional[int]`
1   + from typing import Optional
2   | def func():
3   |     return 1
4   | 
--------------------------------------------------------------------------------
102 |         return 4
103 | 
104 | 
    - def func(x: int):
105 + def func(x: int) -> Optional[int]:
106 |     for i in range(5):
107 |         if i > 0:
108 |             break
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:112:5
    |
112 | def func(x: int):
    |     ^^^^
113 |     try:
114 |         pass
    |
help: Add return type annotation: `Optional[int]`
1   + from typing import Optional
2   | def func():
3   |     return 1
4   | 
--------------------------------------------------------------------------------
110 |         return 4
111 | 
112 | 
    - def func(x: int):
113 + def func(x: int) -> Optional[int]:
114 |     try:
115 |         pass
116 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:119:5
    |
119 | def func(x: int):
    |     ^^^^
120 |     try:
121 |         pass
    |
help: Add return type annotation: `int`
116 |         return 1
117 | 
118 | 
    - def func(x: int):
119 + def func(x: int) -> int:
120 |     try:
121 |         pass
122 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:128:5
    |
128 | def func(x: int):
    |     ^^^^
129 |     try:
130 |         pass
    |
help: Add return type annotation: `int`
125 |         return 2
126 | 
127 | 
    - def func(x: int):
128 + def func(x: int) -> int:
129 |     try:
130 |         pass
131 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:137:5
    |
137 | def func(x: int):
    |     ^^^^
138 |     try:
139 |         return 1
    |
help: Add return type annotation: `Optional[int]`
1   + from typing import Optional
2   | def func():
3   |     return 1
4   | 
--------------------------------------------------------------------------------
135 |         return 2
136 | 
137 | 
    - def func(x: int):
138 + def func(x: int) -> Optional[int]:
139 |     try:
140 |         return 1
141 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:146:5
    |
146 | def func(x: int):
    |     ^^^^
147 |     while x > 0:
148 |         break
    |
help: Add return type annotation: `Optional[int]`
1   + from typing import Optional
2   | def func():
3   |     return 1
4   | 
--------------------------------------------------------------------------------
144 |         pass
145 | 
146 | 
    - def func(x: int):
147 + def func(x: int) -> Optional[int]:
148 |     while x > 0:
149 |         break
150 |         return 1
note: This is an unsafe fix and may change runtime behavior

ANN201 Missing return type annotation for public function `method`
   --> auto_return_type.py:158:9
    |
156 | class Foo(abc.ABC):
157 |     @abstractmethod
158 |     def method(self):
    |         ^^^^^^
159 |         pass
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `method`
   --> auto_return_type.py:162:9
    |
161 |     @abc.abstractmethod
162 |     def method(self):
    |         ^^^^^^
163 |         """Docstring."""
    |
help: Add return type annotation

ANN201 Missing return type annotation for public function `method`
   --> auto_return_type.py:166:9
    |
165 |     @abc.abstractmethod
166 |     def method(self):
    |         ^^^^^^
167 |         ...
    |
help: Add return type annotation

ANN205 Missing return type annotation for staticmethod `method`
   --> auto_return_type.py:171:9
    |
169 |     @staticmethod
170 |     @abstractmethod
171 |     def method():
    |         ^^^^^^
172 |         pass
    |
help: Add return type annotation

ANN206 Missing return type annotation for classmethod `method`
   --> auto_return_type.py:176:9
    |
174 |     @classmethod
175 |     @abstractmethod
176 |     def method(cls):
    |         ^^^^^^
177 |         pass
    |
help: Add return type annotation

ANN201 [*] Missing return type annotation for public function `method`
   --> auto_return_type.py:180:9
    |
179 |     @abstractmethod
180 |     def method(self):
    |         ^^^^^^
181 |         if self.x > 0:
182 |             return 1
    |
help: Add return type annotation: `float`
177 |         pass
178 | 
179 |     @abstractmethod
    -     def method(self):
180 +     def method(self) -> float:
181 |         if self.x > 0:
182 |             return 1
183 |         else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:187:5
    |
187 | def func(x: int):
    |     ^^^^
188 |     try:
189 |         pass
    |
help: Add return type annotation: `Optional[int]`
151 | 
152 | import abc
153 | from abc import abstractmethod
154 + from typing import Optional
155 | 
156 | 
157 | class Foo(abc.ABC):
--------------------------------------------------------------------------------
185 |             return 1.5
186 | 
187 | 
    - def func(x: int):
188 + def func(x: int) -> Optional[int]:
189 |     try:
190 |         pass
191 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:194:5
    |
194 | def func(x: int):
    |     ^^^^
195 |     try:
196 |         pass
    |
help: Add return type annotation: `int`
191 |         return 2
192 | 
193 | 
    - def func(x: int):
194 + def func(x: int) -> int:
195 |     try:
196 |         pass
197 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:203:5
    |
203 | def func(x: int):
    |     ^^^^
204 |     if not x:
205 |         raise ValueError
    |
help: Add return type annotation: `NoReturn`
151 | 
152 | import abc
153 | from abc import abstractmethod
154 + from typing import NoReturn
155 | 
156 | 
157 | class Foo(abc.ABC):
--------------------------------------------------------------------------------
201 |         return 3
202 | 
203 | 
    - def func(x: int):
204 + def func(x: int) -> NoReturn:
205 |     if not x:
206 |         raise ValueError
207 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:210:5
    |
210 | def func(x: int):
    |     ^^^^
211 |     if not x:
212 |         raise ValueError
    |
help: Add return type annotation: `int`
207 |         raise TypeError
208 | 
209 | 
    - def func(x: int):
210 + def func(x: int) -> int:
211 |     if not x:
212 |         raise ValueError
213 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:234:5
    |
234 | def func(x: int):
    |     ^^^^
235 |     if not x:
236 |         return 1
    |
help: Add return type annotation: `int`
231 |     return i
232 | 
233 | 
    - def func(x: int):
234 + def func(x: int) -> int:
235 |     if not x:
236 |         return 1
237 |     raise ValueError
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:240:5
    |
240 | def func(x: int):
    |     ^^^^
241 |     if not x:
242 |         return 1
    |
help: Add return type annotation: `int`
237 |     raise ValueError
238 | 
239 | 
    - def func(x: int):
240 + def func(x: int) -> int:
241 |     if not x:
242 |         return 1
243 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:248:5
    |
248 | def func():
    |     ^^^^
249 |     try:
250 |         raise ValueError
    |
help: Add return type annotation: `Optional[int]`
214 |         return 1
215 | 
216 | 
    - from typing import overload
217 + from typing import overload, Optional
218 | 
219 | 
220 | @overload
--------------------------------------------------------------------------------
245 |     raise ValueError
246 | 
247 | 
    - def func():
248 + def func() -> Optional[int]:
249 |     try:
250 |         raise ValueError
251 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:255:5
    |
255 | def func():
    |     ^^^^
256 |     try:
257 |         return 1
    |
help: Add return type annotation: `Optional[int]`
214 |         return 1
215 | 
216 | 
    - from typing import overload
217 + from typing import overload, Optional
218 | 
219 | 
220 | @overload
--------------------------------------------------------------------------------
252 |         return 2
253 | 
254 | 
    - def func():
255 + def func() -> Optional[int]:
256 |     try:
257 |         return 1
258 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:262:5
    |
262 | def func(x: int):
    |     ^^^^
263 |     for _ in range(3):
264 |         if x > 0:
    |
help: Add return type annotation: `int`
259 |         pass
260 | 
261 | 
    - def func(x: int):
262 + def func(x: int) -> int:
263 |     for _ in range(3):
264 |         if x > 0:
265 |             return 1
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:269:5
    |
269 | def func(x: int):
    |     ^^^^
270 |     if x > 5:
271 |         raise ValueError
    |
help: Add return type annotation: `None`
266 |     raise ValueError
267 | 
268 | 
    - def func(x: int):
269 + def func(x: int) -> None:
270 |     if x > 5:
271 |         raise ValueError
272 |     else:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:276:5
    |
276 | def func(x: int):
    |     ^^^^
277 |     if x > 5:
278 |         raise ValueError
    |
help: Add return type annotation: `None`
273 |         pass
274 | 
275 | 
    - def func(x: int):
276 + def func(x: int) -> None:
277 |     if x > 5:
278 |         raise ValueError
279 |     elif x > 10:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:283:5
    |
283 | def func(x: int):
    |     ^^^^
284 |     if x > 5:
285 |         raise ValueError
    |
help: Add return type annotation: `Optional[int]`
214 |         return 1
215 | 
216 | 
    - from typing import overload
217 + from typing import overload, Optional
218 | 
219 | 
220 | @overload
--------------------------------------------------------------------------------
280 |         pass
281 | 
282 | 
    - def func(x: int):
283 + def func(x: int) -> Optional[int]:
284 |     if x > 5:
285 |         raise ValueError
286 |     elif x > 10:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:290:5
    |
290 | def func():
    |     ^^^^
291 |     try:
292 |         return 5
    |
help: Add return type annotation: `int`
287 |         return 5
288 | 
289 | 
    - def func():
290 + def func() -> int:
291 |     try:
292 |         return 5
293 |     except:
note: This is an unsafe fix and may change runtime behavior

ANN201 [*] Missing return type annotation for public function `func`
   --> auto_return_type.py:299:5
    |
299 | def func(x: int):
    |     ^^^^
300 |     match x:
301 |         case [1, 2, 3]:
    |
help: Add return type annotation: `Union[str, int]`
214 |         return 1
215 | 
216 | 
    - from typing import overload
217 + from typing import overload, Union
218 | 
219 | 
220 | @overload
--------------------------------------------------------------------------------
296 |     raise ValueError
297 | 
298 | 
    - def func(x: int):
299 + def func(x: int) -> Union[str, int]:
300 |     match x:
301 |         case [1, 2, 3]:
302 |             return 1
note: This is an unsafe fix and may change runtime behavior
