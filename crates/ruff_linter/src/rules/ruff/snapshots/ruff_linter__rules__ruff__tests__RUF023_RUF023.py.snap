---
source: crates/ruff_linter/src/rules/ruff/mod.rs
---
RUF023.py:5:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable)`)
  |
3 | def foo():
4 |     numbers = [1,2,3]
5 |     {n: None for n in numbers} # RUF023
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
6 | 
7 | def foo():
  |
  = help: Rewrite using `dict.fromkeys(iterable, value)`)

ℹ Safe fix
2 2 | 
3 3 | def foo():
4 4 |     numbers = [1,2,3]
5   |-    {n: None for n in numbers} # RUF023
  5 |+    dict.fromkeys(numbers) # RUF023
6 6 | 
7 7 | def foo():
8 8 |     for key, value in {n: 1 for n in [1,2,3]}.items(): # RUF023

RUF023.py:8:23: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
  |
7 | def foo():
8 |     for key, value in {n: 1 for n in [1,2,3]}.items(): # RUF023
  |                       ^^^^^^^^^^^^^^^^^^^^^^^ RUF023
9 |         pass
  |
  = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
5 5 |     {n: None for n in numbers} # RUF023
6 6 | 
7 7 | def foo():
8   |-    for key, value in {n: 1 for n in [1,2,3]}.items(): # RUF023
  8 |+    for key, value in dict.fromkeys([1,2,3], 1).items(): # RUF023
9 9 |         pass
10 10 | 
11 11 | def foo():

RUF023.py:12:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
11 | def foo():
12 |     {n: 1.1 for n in [1,2,3]} # RUF023
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
13 | 
14 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
9  9  |         pass
10 10 | 
11 11 | def foo():
12    |-    {n: 1.1 for n in [1,2,3]} # RUF023
   12 |+    dict.fromkeys([1,2,3], 1.1) # RUF023
13 13 | 
14 14 | def foo():
15 15 |     {n: complex(3, 5) for n in [1,2,3]} # RUF023

RUF023.py:20:7: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
18 |     def f(data):
19 |         return data
20 |     f({c: "a" for c in "12345"}) # RUF023
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
21 | 
22 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
17 17 | def foo():
18 18 |     def f(data):
19 19 |         return data
20    |-    f({c: "a" for c in "12345"}) # RUF023
   20 |+    f(dict.fromkeys("12345", "a")) # RUF023
21 21 | 
22 22 | def foo():
23 23 |     {n: True for n in [1,2,2]} # RUF023

RUF023.py:23:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
22 | def foo():
23 |     {n: True for n in [1,2,2]} # RUF023
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
24 | 
25 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
20 20 |     f({c: "a" for c in "12345"}) # RUF023
21 21 | 
22 22 | def foo():
23    |-    {n: True for n in [1,2,2]} # RUF023
   23 |+    dict.fromkeys([1,2,2], True) # RUF023
24 24 | 
25 25 | def foo():
26 26 |     {n: b'hello' for n in (1,2,2)} # RUF023

RUF023.py:26:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
25 | def foo():
26 |     {n: b'hello' for n in (1,2,2)} # RUF023
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
27 | 
28 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
23 23 |     {n: True for n in [1,2,2]} # RUF023
24 24 | 
25 25 | def foo():
26    |-    {n: b'hello' for n in (1,2,2)} # RUF023
   26 |+    dict.fromkeys((1,2,2), b'hello') # RUF023
27 27 | 
28 28 | def foo():
29 29 |     {n: ... for n in [1,2,3]} # RUF023

RUF023.py:29:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
28 | def foo():
29 |     {n: ... for n in [1,2,3]} # RUF023
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
30 | 
31 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
26 26 |     {n: b'hello' for n in (1,2,2)} # RUF023
27 27 | 
28 28 | def foo():
29    |-    {n: ... for n in [1,2,3]} # RUF023
   29 |+    dict.fromkeys([1,2,3], ...) # RUF023
30 30 | 
31 31 | def foo():
32 32 |     values = ["a", "b", "c"]

RUF023.py:33:6: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
31 | def foo():
32 |     values = ["a", "b", "c"]
33 |     [{n: values for n in [1,2,3]}] # RUF023
   |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
34 | 
35 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
30 30 | 
31 31 | def foo():
32 32 |     values = ["a", "b", "c"]
33    |-    [{n: values for n in [1,2,3]}] # RUF023
   33 |+    [dict.fromkeys([1,2,3], values)] # RUF023
34 34 | 
35 35 | def foo():
36 36 |     def f():

RUF023.py:40:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
39 |     a = f()
40 |     {n: a for n in [1,2,3]} # RUF023
   |     ^^^^^^^^^^^^^^^^^^^^^^^ RUF023
41 | 
42 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
37 37 |         return 1
38 38 |     
39 39 |     a = f()
40    |-    {n: a for n in [1,2,3]} # RUF023
   40 |+    dict.fromkeys([1,2,3], a) # RUF023
41 41 | 
42 42 | def foo():
43 43 |     def f():

RUF023.py:52:5: RUF023 [*] Unnecessary dict comprehension for iterable (rewrite using `dict.fromkeys(iterable, value)`)
   |
51 | def foo():
52 |     {n: 1 for n in [1,2,3,4,5] if n < 3} # OK
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RUF023
53 | 
54 | def foo():
   |
   = help: Rewrite using `dict.fromkeys(iterable)`)

ℹ Safe fix
49 49 | # Non-violation cases: RUF023
50 50 | 
51 51 | def foo():
52    |-    {n: 1 for n in [1,2,3,4,5] if n < 3} # OK
   52 |+    dict.fromkeys([1,2,3,4,5], 1) # OK
53 53 | 
54 54 | def foo():
55 55 |     {n: 1 for c in [1,2,3,4,5] for n in [1,2,3] if c < 3} # OK


