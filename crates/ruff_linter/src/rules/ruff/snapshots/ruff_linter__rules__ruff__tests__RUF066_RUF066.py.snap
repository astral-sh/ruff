---
source: crates/ruff_linter/src/rules/ruff/mod.rs
---
RUF066.py:9:9: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
 7 |     if b:
 8 |         global g
 9 |         g = 2  # RUF066: assignment reachable without global declaration
   |         ^ RUF066
10 |     else:
11 |         g = 3  # RUF066: assignment reachable without global declaration
   |

RUF066.py:11:9: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
 9 |         g = 2  # RUF066: assignment reachable without global declaration
10 |     else:
11 |         g = 3  # RUF066: assignment reachable without global declaration
   |         ^ RUF066
12 |
13 | # No global declaration - should not trigger
   |

RUF066.py:33:13: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
31 |         if other:
32 |             global g
33 |             g = 10  # RUF066: can be reached without global
   |             ^ RUF066
34 |         g = 20  # RUF066: can be reached without global
35 |     else:
   |

RUF066.py:34:9: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
32 |             global g
33 |             g = 10  # RUF066: can be reached without global
34 |         g = 20  # RUF066: can be reached without global
   |         ^ RUF066
35 |     else:
36 |         g = 30  # RUF066: can be reached without global
   |

RUF066.py:36:9: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
34 |         g = 20  # RUF066: can be reached without global
35 |     else:
36 |         g = 30  # RUF066: can be reached without global
   |         ^ RUF066
37 |
38 | # Nested function - should not trigger parent
   |

RUF066.py:52:9: RUF066 The variable x is declared using global, but is used in other branches of this function — this may be unintuitive
   |
50 |     if condition:
51 |         global x, y
52 |         x = 10  # RUF066
   |         ^ RUF066
53 |         y = 20  # RUF066
54 |     else:
   |

RUF066.py:53:9: RUF066 The variable y is declared using global, but is used in other branches of this function — this may be unintuitive
   |
51 |         global x, y
52 |         x = 10  # RUF066
53 |         y = 20  # RUF066
   |         ^ RUF066
54 |     else:
55 |         x = 30  # RUF066
   |

RUF066.py:55:9: RUF066 The variable x is declared using global, but is used in other branches of this function — this may be unintuitive
   |
53 |         y = 20  # RUF066
54 |     else:
55 |         x = 30  # RUF066
   |         ^ RUF066
56 |         # y not used here
   |

RUF066.py:63:13: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
61 |         if item > 5:
62 |             global g
63 |             g = item  # RUF066: can skip global declaration
   |             ^ RUF066
64 |         break
65 |     g = 0  # RUF066: can skip global declaration
   |

RUF066.py:65:5: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
63 |             g = item  # RUF066: can skip global declaration
64 |         break
65 |     g = 0  # RUF066: can skip global declaration
   |     ^ RUF066
66 |
67 | # Try/except case
   |

RUF066.py:72:13: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
70 |         if True:
71 |             global g
72 |             g = 100  # RUF066
   |             ^ RUF066
73 |     except:
74 |         g = 200  # RUF066: can skip global declaration
   |

RUF066.py:74:9: RUF066 The variable g is declared using global, but is used in other branches of this function — this may be unintuitive
   |
72 |             g = 100  # RUF066
73 |     except:
74 |         g = 200  # RUF066: can skip global declaration
   |         ^ RUF066
75 |
76 | # Simple nonlocal case - should trigger
   |

RUF066.py:83:13: RUF066 The variable n is declared using nonlocal, but is used in other branches of this function — this may be unintuitive
   |
81 |         if condition:
82 |             nonlocal n
83 |             n = 10  # RUF066: Should trigger for nonlocal
   |             ^ RUF066
84 |         else:
85 |             n = 20  # RUF066: Should trigger for nonlocal
   |

RUF066.py:85:13: RUF066 The variable n is declared using nonlocal, but is used in other branches of this function — this may be unintuitive
   |
83 |             n = 10  # RUF066: Should trigger for nonlocal
84 |         else:
85 |             n = 20  # RUF066: Should trigger for nonlocal
   |             ^ RUF066
86 |
87 |     return inner
   |
