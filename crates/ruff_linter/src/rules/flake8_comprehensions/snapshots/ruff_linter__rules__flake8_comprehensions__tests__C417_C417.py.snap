---
source: crates/ruff_linter/src/rules/flake8_comprehensions/mod.rs
---
C417.py:3:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
  |
1 | # Errors.
2 | nums = [1, 2, 3]
3 | map(lambda x: x + 1, nums)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
4 | map(lambda x: str(x), nums)
5 | list(map(lambda x: x * 2, nums))
  |
  = help: Replace `map` with a generator expression


C417.py:4:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
  |
2 | nums = [1, 2, 3]
3 | map(lambda x: x + 1, nums)
4 | map(lambda x: str(x), nums)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
5 | list(map(lambda x: x * 2, nums))
6 | set(map(lambda x: x % 2 == 0, nums))
  |
  = help: Replace `map` with a generator expression


C417.py:5:1: C417 [*] Unnecessary `map` usage (rewrite using a `list` comprehension)
  |
3 | map(lambda x: x + 1, nums)
4 | map(lambda x: str(x), nums)
5 | list(map(lambda x: x * 2, nums))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
6 | set(map(lambda x: x % 2 == 0, nums))
7 | dict(map(lambda v: (v, v**2), nums))
  |
  = help: Replace `map` with a `list` comprehension


C417.py:6:1: C417 [*] Unnecessary `map` usage (rewrite using a `set` comprehension)
  |
4 | map(lambda x: str(x), nums)
5 | list(map(lambda x: x * 2, nums))
6 | set(map(lambda x: x % 2 == 0, nums))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
7 | dict(map(lambda v: (v, v**2), nums))
8 | dict(map(lambda v: [v, v**2], nums))
  |
  = help: Replace `map` with a `set` comprehension


C417.py:7:1: C417 [*] Unnecessary `map` usage (rewrite using a `dict` comprehension)
  |
5 | list(map(lambda x: x * 2, nums))
6 | set(map(lambda x: x % 2 == 0, nums))
7 | dict(map(lambda v: (v, v**2), nums))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
8 | dict(map(lambda v: [v, v**2], nums))
9 | map(lambda: "const", nums)
  |
  = help: Replace `map` with a `dict` comprehension


C417.py:8:1: C417 [*] Unnecessary `map` usage (rewrite using a `dict` comprehension)
   |
 6 | set(map(lambda x: x % 2 == 0, nums))
 7 | dict(map(lambda v: (v, v**2), nums))
 8 | dict(map(lambda v: [v, v**2], nums))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
 9 | map(lambda: "const", nums)
10 | map(lambda _: 3.0, nums)
   |
   = help: Replace `map` with a `dict` comprehension


C417.py:9:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
 7 | dict(map(lambda v: (v, v**2), nums))
 8 | dict(map(lambda v: [v, v**2], nums))
 9 | map(lambda: "const", nums)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
10 | map(lambda _: 3.0, nums)
11 | _ = "".join(map(lambda x: x in nums and "1" or "0", range(123)))
   |
   = help: Replace `map` with a generator expression


C417.py:10:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
 8 | dict(map(lambda v: [v, v**2], nums))
 9 | map(lambda: "const", nums)
10 | map(lambda _: 3.0, nums)
   | ^^^^^^^^^^^^^^^^^^^^^^^^ C417
11 | _ = "".join(map(lambda x: x in nums and "1" or "0", range(123)))
12 | all(map(lambda v: isinstance(v, dict), nums))
   |
   = help: Replace `map` with a generator expression


C417.py:11:13: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
 9 | map(lambda: "const", nums)
10 | map(lambda _: 3.0, nums)
11 | _ = "".join(map(lambda x: x in nums and "1" or "0", range(123)))
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
12 | all(map(lambda v: isinstance(v, dict), nums))
13 | filter(func, map(lambda v: v, nums))
   |
   = help: Replace `map` with a generator expression


C417.py:12:5: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
10 | map(lambda _: 3.0, nums)
11 | _ = "".join(map(lambda x: x in nums and "1" or "0", range(123)))
12 | all(map(lambda v: isinstance(v, dict), nums))
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
13 | filter(func, map(lambda v: v, nums))
14 | list(map(lambda x, y: x * y, nums))
   |
   = help: Replace `map` with a generator expression


C417.py:13:14: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
11 | _ = "".join(map(lambda x: x in nums and "1" or "0", range(123)))
12 | all(map(lambda v: isinstance(v, dict), nums))
13 | filter(func, map(lambda v: v, nums))
   |              ^^^^^^^^^^^^^^^^^^^^^^ C417
14 | list(map(lambda x, y: x * y, nums))
   |
   = help: Replace `map` with a generator expression


C417.py:14:1: C417 [*] Unnecessary `map` usage (rewrite using a `list` comprehension)
   |
12 | all(map(lambda v: isinstance(v, dict), nums))
13 | filter(func, map(lambda v: v, nums))
14 | list(map(lambda x, y: x * y, nums))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
15 | 
16 | # When inside f-string, then the fix should be surrounded by whitespace
   |
   = help: Replace `map` with a `list` comprehension


C417.py:17:8: C417 [*] Unnecessary `map` usage (rewrite using a `set` comprehension)
   |
16 | # When inside f-string, then the fix should be surrounded by whitespace
17 | _ = f"{set(map(lambda x: x % 2 == 0, nums))}"
   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
18 | _ = f"{dict(map(lambda v: (v, v**2), nums))}"
   |
   = help: Replace `map` with a `set` comprehension


C417.py:18:8: C417 [*] Unnecessary `map` usage (rewrite using a `dict` comprehension)
   |
16 | # When inside f-string, then the fix should be surrounded by whitespace
17 | _ = f"{set(map(lambda x: x % 2 == 0, nums))}"
18 | _ = f"{dict(map(lambda v: (v, v**2), nums))}"
   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
19 | 
20 | # False negatives.
   |
   = help: Replace `map` with a `dict` comprehension


C417.py:36:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
35 | # Error: the `x` is overridden by the inner lambda.
36 | map(lambda x: lambda x: x, range(4))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
37 | 
38 | # Ok because of the default parameters, and variadic arguments.
   |
   = help: Replace `map` with a generator expression


C417.py:47:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
46 | # Regression test for: https://github.com/astral-sh/ruff/issues/7121
47 | map(lambda x: x, y if y else z)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
48 | map(lambda x: x, (y if y else z))
49 | map(lambda x: x, (x, y, z))
   |
   = help: Replace `map` with a generator expression


C417.py:48:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
46 | # Regression test for: https://github.com/astral-sh/ruff/issues/7121
47 | map(lambda x: x, y if y else z)
48 | map(lambda x: x, (y if y else z))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
49 | map(lambda x: x, (x, y, z))
   |
   = help: Replace `map` with a generator expression


C417.py:49:1: C417 [*] Unnecessary `map` usage (rewrite using a generator expression)
   |
47 | map(lambda x: x, y if y else z)
48 | map(lambda x: x, (y if y else z))
49 | map(lambda x: x, (x, y, z))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^ C417
   |
   = help: Replace `map` with a generator expression
