---
source: crates/ruff_linter/src/rules/refurb/mod.rs
---
FURB171.py:3:4: FURB171 [*] Membership test against single-item container
  |
1 | # Errors.
2 |
3 | if 1 in (1,):
  |    ^^^^^^^^^ FURB171
4 |     print("Single-element tuple")
  |
  = help: Convert to equality test

ℹ Safe fix
1 1 | # Errors.
2 2 | 
3   |-if 1 in (1,):
  3 |+if 1 == 1:
4 4 |     print("Single-element tuple")
5 5 | 
6 6 | if 1 in [1]:

FURB171.py:6:4: FURB171 [*] Membership test against single-item container
  |
4 |     print("Single-element tuple")
5 |
6 | if 1 in [1]:
  |    ^^^^^^^^ FURB171
7 |     print("Single-element list")
  |
  = help: Convert to equality test

ℹ Safe fix
3 3 | if 1 in (1,):
4 4 |     print("Single-element tuple")
5 5 | 
6   |-if 1 in [1]:
  6 |+if 1 == 1:
7 7 |     print("Single-element list")
8 8 | 
9 9 | if 1 in {1}:

FURB171.py:9:4: FURB171 [*] Membership test against single-item container
   |
 7 |     print("Single-element list")
 8 |
 9 | if 1 in {1}:
   |    ^^^^^^^^ FURB171
10 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
6  6  | if 1 in [1]:
7  7  |     print("Single-element list")
8  8  | 
9     |-if 1 in {1}:
   9  |+if 1 == 1:
10 10 |     print("Single-element set")
11 11 | 
12 12 | if 1 in set([1]):

FURB171.py:12:4: FURB171 [*] Membership test against single-item container
   |
10 |     print("Single-element set")
11 |
12 | if 1 in set([1]):
   |    ^^^^^^^^^^^^^ FURB171
13 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
9  9  | if 1 in {1}:
10 10 |     print("Single-element set")
11 11 | 
12    |-if 1 in set([1]):
   12 |+if 1 == 1:
13 13 |     print("Single-element set")
14 14 | 
15 15 | if 1 in set((1,)):

FURB171.py:15:4: FURB171 [*] Membership test against single-item container
   |
13 |     print("Single-element set")
14 |
15 | if 1 in set((1,)):
   |    ^^^^^^^^^^^^^^ FURB171
16 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
12 12 | if 1 in set([1]):
13 13 |     print("Single-element set")
14 14 | 
15    |-if 1 in set((1,)):
   15 |+if 1 == 1:
16 16 |     print("Single-element set")
17 17 | 
18 18 | if 1 in set({1}):

FURB171.py:18:4: FURB171 [*] Membership test against single-item container
   |
16 |     print("Single-element set")
17 |
18 | if 1 in set({1}):
   |    ^^^^^^^^^^^^^ FURB171
19 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
15 15 | if 1 in set((1,)):
16 16 |     print("Single-element set")
17 17 | 
18    |-if 1 in set({1}):
   18 |+if 1 == 1:
19 19 |     print("Single-element set")
20 20 | 
21 21 | if 1 in frozenset([1]):

FURB171.py:21:4: FURB171 [*] Membership test against single-item container
   |
19 |     print("Single-element set")
20 |
21 | if 1 in frozenset([1]):
   |    ^^^^^^^^^^^^^^^^^^^ FURB171
22 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
18 18 | if 1 in set({1}):
19 19 |     print("Single-element set")
20 20 | 
21    |-if 1 in frozenset([1]):
   21 |+if 1 == 1:
22 22 |     print("Single-element set")
23 23 | 
24 24 | if 1 in frozenset((1,)):

FURB171.py:24:4: FURB171 [*] Membership test against single-item container
   |
22 |     print("Single-element set")
23 |
24 | if 1 in frozenset((1,)):
   |    ^^^^^^^^^^^^^^^^^^^^ FURB171
25 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
21 21 | if 1 in frozenset([1]):
22 22 |     print("Single-element set")
23 23 | 
24    |-if 1 in frozenset((1,)):
   24 |+if 1 == 1:
25 25 |     print("Single-element set")
26 26 | 
27 27 | if 1 in frozenset({1}):

FURB171.py:27:4: FURB171 [*] Membership test against single-item container
   |
25 |     print("Single-element set")
26 |
27 | if 1 in frozenset({1}):
   |    ^^^^^^^^^^^^^^^^^^^ FURB171
28 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
24 24 | if 1 in frozenset((1,)):
25 25 |     print("Single-element set")
26 26 | 
27    |-if 1 in frozenset({1}):
   27 |+if 1 == 1:
28 28 |     print("Single-element set")
29 29 | 
30 30 | if "a" in "a":

FURB171.py:30:4: FURB171 [*] Membership test against single-item container
   |
28 |     print("Single-element set")
29 |
30 | if "a" in "a":
   |    ^^^^^^^^^^ FURB171
31 |     print("Single-element string")
   |
   = help: Convert to equality test

ℹ Unsafe fix
27 27 | if 1 in frozenset({1}):
28 28 |     print("Single-element set")
29 29 | 
30    |-if "a" in "a":
   30 |+if "a" == "a":
31 31 |     print("Single-element string")
32 32 | 
33 33 | if 1 not in (1,):

FURB171.py:33:4: FURB171 [*] Membership test against single-item container
   |
31 |     print("Single-element string")
32 |
33 | if 1 not in (1,):
   |    ^^^^^^^^^^^^^ FURB171
34 |     print("Check `not in` membership test")
   |
   = help: Convert to inequality test

ℹ Safe fix
30 30 | if "a" in "a":
31 31 |     print("Single-element string")
32 32 | 
33    |-if 1 not in (1,):
   33 |+if 1 != 1:
34 34 |     print("Check `not in` membership test")
35 35 | 
36 36 | if not 1 in (1,):

FURB171.py:36:8: FURB171 [*] Membership test against single-item container
   |
34 |     print("Check `not in` membership test")
35 |
36 | if not 1 in (1,):
   |        ^^^^^^^^^ FURB171
37 |     print("Check the negated membership test")
   |
   = help: Convert to equality test

ℹ Safe fix
33 33 | if 1 not in (1,):
34 34 |     print("Check `not in` membership test")
35 35 | 
36    |-if not 1 in (1,):
   36 |+if not 1 == 1:
37 37 |     print("Check the negated membership test")
38 38 | 
39 39 | # Non-errors.

FURB171.py:88:5: FURB171 [*] Membership test against single-item container
   |
87 |   # https://github.com/astral-sh/ruff/issues/10063
88 |   _ = a in (
   |  _____^
89 | |     # Foo
90 | |     b,
91 | | )
   | |_^ FURB171
92 |
93 |   _ = a in (  # Foo1
   |
   = help: Convert to equality test

ℹ Unsafe fix
85 85 | 
86 86 | 
87 87 | # https://github.com/astral-sh/ruff/issues/10063
88    |-_ = a in (
89    |-    # Foo
90    |-    b,
91    |-)
   88 |+_ = a == b
92 89 | 
93 90 | _ = a in (  # Foo1
94 91 |     (  # Foo2

FURB171.py:93:5: FURB171 [*] Membership test against single-item container
    |
 91 |   )
 92 |
 93 |   _ = a in (  # Foo1
    |  _____^
 94 | |     (  # Foo2
 95 | |     # Foo3
 96 | |         (  # Tuple
 97 | |             (  # Bar
 98 | |        (b
 99 | |         # Bar
100 | |         )
101 | |   )
102 | |        # Foo4
103 | |             # Foo5
104 | |      ,
105 | |        )
106 | |         # Foo6
107 | |     )
108 | | )
    | |_^ FURB171
109 |
110 |   foo = (
    |
    = help: Convert to equality test

ℹ Unsafe fix
90  90  |     b,
91  91  | )
92  92  | 
93      |-_ = a in (  # Foo1
94      |-    (  # Foo2
95      |-    # Foo3
96      |-        (  # Tuple
97      |-            (  # Bar
    93  |+_ = a == (  # Bar
98  94  |        (b
99  95  |         # Bar
100 96  |         )
101 97  |   )
102     |-       # Foo4
103     |-            # Foo5
104     |-     ,
105     |-       )
106     |-        # Foo6
107     |-    )
108     |-)
109 98  | 
110 99  | foo = (
111 100 |     lorem()

FURB171.py:113:28: FURB171 [*] Membership test against single-item container
    |
111 |       lorem()
112 |           .ipsum()
113 |           .dolor(lambda sit: sit in (
    |  ____________________________^
114 | |             # Foo1
115 | |             # Foo2
116 | |             amet,
117 | |         ))
    | |_________^ FURB171
118 |   )
    |
    = help: Convert to equality test

ℹ Unsafe fix
110 110 | foo = (
111 111 |     lorem()
112 112 |         .ipsum()
113     |-        .dolor(lambda sit: sit in (
114     |-            # Foo1
115     |-            # Foo2
116     |-            amet,
117     |-        ))
    113 |+        .dolor(lambda sit: sit == amet)
118 114 | )
119 115 | 
120 116 | foo = (

FURB171.py:123:28: FURB171 [*] Membership test against single-item container
    |
121 |       lorem()
122 |           .ipsum()
123 |           .dolor(lambda sit: sit in (
    |  ____________________________^
124 | |             (
125 | |                 # Foo1
126 | |                 # Foo2
127 | |                 amet
128 | |             ),
129 | |         ))
    | |_________^ FURB171
130 |   )
    |
    = help: Convert to equality test

ℹ Unsafe fix
120 120 | foo = (
121 121 |     lorem()
122 122 |         .ipsum()
123     |-        .dolor(lambda sit: sit in (
124     |-            (
    123 |+        .dolor(lambda sit: sit == (
125 124 |                 # Foo1
126 125 |                 # Foo2
127 126 |                 amet
128     |-            ),
129     |-        ))
    127 |+            ))
130 128 | )
131 129 | 
132 130 | foo = lorem() \

FURB171.py:134:24: FURB171 [*] Membership test against single-item container
    |
132 |   foo = lorem() \
133 |       .ipsum() \
134 |       .dolor(lambda sit: sit in (
    |  ________________________^
135 | |         # Foo1
136 | |         # Foo2
137 | |         amet,
138 | |     ))
    | |_____^ FURB171
139 |
140 |   def _():
    |
    = help: Convert to equality test

ℹ Unsafe fix
131 131 | 
132 132 | foo = lorem() \
133 133 |     .ipsum() \
134     |-    .dolor(lambda sit: sit in (
135     |-        # Foo1
136     |-        # Foo2
137     |-        amet,
138     |-    ))
    134 |+    .dolor(lambda sit: sit == amet)
139 135 | 
140 136 | def _():
141 137 |     if foo not \

FURB171.py:141:8: FURB171 [*] Membership test against single-item container
    |
140 |   def _():
141 |       if foo not \
    |  ________^
142 | |         in [
143 | |         # Before
144 | |         bar
145 | |         # After
146 | |     ]: ...
    | |_____^ FURB171
147 |
148 |   def _():
    |
    = help: Convert to inequality test

ℹ Unsafe fix
138 138 |     ))
139 139 | 
140 140 | def _():
141     |-    if foo not \
142     |-        in [
143     |-        # Before
144     |-        bar
145     |-        # After
146     |-    ]: ...
    141 |+    if foo != bar: ...
147 142 | 
148 143 | def _():
149 144 |     if foo not \

FURB171.py:149:8: FURB171 [*] Membership test against single-item container
    |
148 |   def _():
149 |       if foo not \
    |  ________^
150 | |         in [
151 | |         # Before
152 | |         bar
153 | |         # After
154 | |     ] and \
    | |_____^ FURB171
155 |           0 < 1: ...
    |
    = help: Convert to inequality test

ℹ Unsafe fix
146 146 |     ]: ...
147 147 | 
148 148 | def _():
149     |-    if foo not \
150     |-        in [
151     |-        # Before
152     |-        bar
153     |-        # After
154     |-    ] and \
    149 |+    if foo != bar and \
155 150 |         0 < 1: ...
