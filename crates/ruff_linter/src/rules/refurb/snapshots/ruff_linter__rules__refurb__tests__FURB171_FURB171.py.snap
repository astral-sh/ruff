---
source: crates/ruff_linter/src/rules/refurb/mod.rs
---
FURB171.py:3:4: FURB171 [*] Membership test against single-item container
  |
1 | # Errors.
2 |
3 | if 1 in (1,):
  |    ^^^^^^^^^ FURB171
4 |     print("Single-element tuple")
  |
  = help: Convert to equality test

ℹ Safe fix
1 1 | # Errors.
2 2 | 
3   |-if 1 in (1,):
  3 |+if 1 == 1:
4 4 |     print("Single-element tuple")
5 5 | 
6 6 | if 1 in [1]:

FURB171.py:6:4: FURB171 [*] Membership test against single-item container
  |
4 |     print("Single-element tuple")
5 |
6 | if 1 in [1]:
  |    ^^^^^^^^ FURB171
7 |     print("Single-element list")
  |
  = help: Convert to equality test

ℹ Safe fix
3 3 | if 1 in (1,):
4 4 |     print("Single-element tuple")
5 5 | 
6   |-if 1 in [1]:
  6 |+if 1 == 1:
7 7 |     print("Single-element list")
8 8 | 
9 9 | if 1 in {1}:

FURB171.py:9:4: FURB171 [*] Membership test against single-item container
   |
 7 |     print("Single-element list")
 8 |
 9 | if 1 in {1}:
   |    ^^^^^^^^ FURB171
10 |     print("Single-element set")
   |
   = help: Convert to equality test

ℹ Safe fix
6  6  | if 1 in [1]:
7  7  |     print("Single-element list")
8  8  | 
9     |-if 1 in {1}:
   9  |+if 1 == 1:
10 10 |     print("Single-element set")
11 11 | 
12 12 | if "a" in "a":

FURB171.py:12:4: FURB171 [*] Membership test against single-item container
   |
10 |     print("Single-element set")
11 |
12 | if "a" in "a":
   |    ^^^^^^^^^^ FURB171
13 |     print("Single-element string")
   |
   = help: Convert to equality test

ℹ Unsafe fix
9  9  | if 1 in {1}:
10 10 |     print("Single-element set")
11 11 | 
12    |-if "a" in "a":
   12 |+if "a" == "a":
13 13 |     print("Single-element string")
14 14 | 
15 15 | if 1 not in (1,):

FURB171.py:15:4: FURB171 [*] Membership test against single-item container
   |
13 |     print("Single-element string")
14 |
15 | if 1 not in (1,):
   |    ^^^^^^^^^^^^^ FURB171
16 |     print("Check `not in` membership test")
   |
   = help: Convert to inequality test

ℹ Safe fix
12 12 | if "a" in "a":
13 13 |     print("Single-element string")
14 14 | 
15    |-if 1 not in (1,):
   15 |+if 1 != 1:
16 16 |     print("Check `not in` membership test")
17 17 | 
18 18 | if not 1 in (1,):

FURB171.py:18:8: FURB171 [*] Membership test against single-item container
   |
16 |     print("Check `not in` membership test")
17 |
18 | if not 1 in (1,):
   |        ^^^^^^^^^ FURB171
19 |     print("Check the negated membership test")
   |
   = help: Convert to equality test

ℹ Safe fix
15 15 | if 1 not in (1,):
16 16 |     print("Check `not in` membership test")
17 17 | 
18    |-if not 1 in (1,):
   18 |+if not 1 == 1:
19 19 |     print("Check the negated membership test")
20 20 | 
21 21 | # Non-errors.

FURB171.py:52:5: FURB171 [*] Membership test against single-item container
   |
51 |   # https://github.com/astral-sh/ruff/issues/10063
52 |   _ = a in (
   |  _____^
53 | |     # Foo
54 | |     b,
55 | | )
   | |_^ FURB171
56 |
57 |   _ = a in (  # Foo1
   |
   = help: Convert to equality test

ℹ Safe fix
49 49 | 
50 50 | 
51 51 | # https://github.com/astral-sh/ruff/issues/10063
52    |-_ = a in (
53    |-    # Foo
54    |-    b,
55    |-)
   52 |+# Foo
   53 |+_ = a == b
56 54 | 
57 55 | _ = a in (  # Foo1
58 56 |     (  # Foo2

FURB171.py:57:5: FURB171 [*] Membership test against single-item container
   |
55 |   )
56 |
57 |   _ = a in (  # Foo1
   |  _____^
58 | |     (  # Foo2
59 | |     # Foo3
60 | |         (  # Tuple
61 | |             (  # Bar
62 | |        (b
63 | |         # Bar
64 | |         )
65 | |   )
66 | |        # Foo4
67 | |             # Foo5
68 | |      ,
69 | |        )
70 | |         # Foo6
71 | |     )
72 | | )
   | |_^ FURB171
73 |
74 |   foo = (
   |
   = help: Convert to equality test

ℹ Safe fix
54 54 |     b,
55 55 | )
56 56 | 
57    |-_ = a in (  # Foo1
   57 |+# Tuple
   58 |+# Foo4
   59 |+# Foo5
   60 |+_ = a == (  # Foo1
58 61 |     (  # Foo2
59 62 |     # Foo3
60    |-        (  # Tuple
61    |-            (  # Bar
   63 |+        (  # Bar
62 64 |        (b
63 65 |         # Bar
64 66 |         )
65 67 |   )
66    |-       # Foo4
67    |-            # Foo5
68    |-     ,
69    |-       )
70 68 |         # Foo6
71 69 |     )
72 70 | )

FURB171.py:77:28: FURB171 [*] Membership test against single-item container
   |
75 |       lorem()
76 |           .ipsum()
77 |           .dolor(lambda sit: sit in (
   |  ____________________________^
78 | |             # Foo1
79 | |             # Foo2
80 | |             amet,
81 | |         ))
   | |_________^ FURB171
82 |   )
   |
   = help: Convert to equality test

ℹ Safe fix
71 71 |     )
72 72 | )
73 73 | 
   74 |+# Foo1
   75 |+# Foo2
74 76 | foo = (
75 77 |     lorem()
76 78 |         .ipsum()
77    |-        .dolor(lambda sit: sit in (
78    |-            # Foo1
79    |-            # Foo2
80    |-            amet,
81    |-        ))
   79 |+        .dolor(lambda sit: sit == amet)
82 80 | )
83 81 | 
84 82 | foo = lorem() \

FURB171.py:86:24: FURB171 [*] Membership test against single-item container
   |
84 |   foo = lorem() \
85 |       .ipsum() \
86 |       .dolor(lambda sit: sit in (
   |  ________________________^
87 | |         # Foo1
88 | |         # Foo2
89 | |         amet,
90 | |     ))
   | |_____^ FURB171
91 |
92 |   def _():
   |
   = help: Convert to equality test

ℹ Safe fix
81 81 |         ))
82 82 | )
83 83 | 
   84 |+# Foo1
   85 |+# Foo2
84 86 | foo = lorem() \
85 87 |     .ipsum() \
86    |-    .dolor(lambda sit: sit in (
87    |-        # Foo1
88    |-        # Foo2
89    |-        amet,
90    |-    ))
   88 |+    .dolor(lambda sit: sit == amet)
91 89 | 
92 90 | def _():
93 91 |     if foo not \

FURB171.py:93:8: FURB171 [*] Membership test against single-item container
    |
 92 |   def _():
 93 |       if foo not \
    |  ________^
 94 | |         in [
 95 | |         # Before
 96 | |         bar
 97 | |         # After
 98 | |     ]: ...
    | |_____^ FURB171
 99 |
100 |   def _():
    |
    = help: Convert to inequality test

ℹ Safe fix
90 90 |     ))
91 91 | 
92 92 | def _():
93    |-    if foo not \
94    |-        in [
95    |-        # Before
96    |-        bar
97    |-        # After
98    |-    ]: ...
   93 |+    # Before
   94 |+    # After
   95 |+    if foo != bar: ...
99 96 | 
100 97 | def _():
101 98 |     if foo not \

FURB171.py:101:8: FURB171 [*] Membership test against single-item container
    |
100 |   def _():
101 |       if foo not \
    |  ________^
102 | |         in [
103 | |         # Before
104 | |         bar
105 | |         # After
106 | |     ] and \
    | |_____^ FURB171
107 |           0 < 1: ...
    |
    = help: Convert to inequality test

ℹ Safe fix
98  98  |     ]: ...
99  99  | 
100 100 | def _():
101     |-    if foo not \
102     |-        in [
103     |-        # Before
104     |-        bar
105     |-        # After
106     |-    ] and \
    101 |+    # Before
    102 |+    # After
    103 |+    if foo != bar and \
107 104 |         0 < 1: ...
