---
source: crates/ruff_linter/src/rules/flake8_commas/mod.rs
---
COM812 [*] Trailing comma missing
 --> COM81.py:4:18
  |
2 | bad_function_call(
3 |     param1='test',
4 |     param2='test'
  |                  ^
5 | )
6 | # ==> bad_list.py <==
  |
help: Add trailing comma
1 | # ==> bad_function_call.py <==
2 | bad_function_call(
3 |     param1='test',
  -     param2='test'
4 +     param2='test',
5 | )
6 | # ==> bad_list.py <==
7 | bad_list = [

COM812 [*] Trailing comma missing
  --> COM81.py:10:6
   |
 8 |     1,
 9 |     2,
10 |     3
   |      ^
11 | ]
   |
help: Add trailing comma
7  | bad_list = [
8  |     1,
9  |     2,
   -     3
10 +     3,
11 | ]
12 | 
13 | bad_list_with_comment = [

COM812 [*] Trailing comma missing
  --> COM81.py:16:6
   |
14 |     1,
15 |     2,
16 |     3
   |      ^
17 |     # still needs a comma!
18 | ]
   |
help: Add trailing comma
13 | bad_list_with_comment = [
14 |     1,
15 |     2,
   -     3
16 +     3,
17 |     # still needs a comma!
18 | ]
19 | 

COM812 [*] Trailing comma missing
  --> COM81.py:23:6
   |
21 |     1,
22 |     2,
23 |     3
   |      ^
   |
help: Add trailing comma
20 | bad_list_with_extra_empty = [
21 |     1,
22 |     2,
   -     3
23 +     3,
24 | 
25 | 
26 | 

COM812 [*] Trailing comma missing
   --> COM81.py:158:11
    |
156 |     SyntaxWarning,
157 |     ThrownHere,
158 |     Anyway
    |           ^
159 | )
    |
help: Add trailing comma
155 | assert(
156 |     SyntaxWarning,
157 |     ThrownHere,
    -     Anyway
158 +     Anyway,
159 | )
160 | 
161 | # async await is fine outside an async def

COM812 [*] Trailing comma missing
   --> COM81.py:293:15
    |
291 | # ==> multiline_bad_dict.py <==
292 | multiline_bad_dict = {
293 |     "bad": 123
    |               ^
294 | }
295 | # ==> multiline_bad_function_def.py <==
    |
help: Add trailing comma
290 | 
291 | # ==> multiline_bad_dict.py <==
292 | multiline_bad_dict = {
    -     "bad": 123
293 +     "bad": 123,
294 | }
295 | # ==> multiline_bad_function_def.py <==
296 | def func_good(

COM812 [*] Trailing comma missing
   --> COM81.py:304:14
    |
302 | def func_bad(
303 |         a = 3,
304 |         b = 2
    |              ^
305 |     ):
306 |     pass
    |
help: Add trailing comma
301 | 
302 | def func_bad(
303 |         a = 3,
    -         b = 2
304 +         b = 2,
305 |     ):
306 |     pass
307 | 

COM812 [*] Trailing comma missing
   --> COM81.py:310:14
    |
308 | # ==> multiline_bad_function_one_param.py <==
309 | def func(
310 |         a = 3
    |              ^
311 |     ):
312 |     pass
    |
help: Add trailing comma
307 | 
308 | # ==> multiline_bad_function_one_param.py <==
309 | def func(
    -         a = 3
310 +         a = 3,
311 |     ):
312 |     pass
313 | 

COM812 [*] Trailing comma missing
   --> COM81.py:322:15
    |
320 | multiline_bad_or_dict = {
321 |     "good": True or False,
322 |     "bad": 123
    |               ^
323 | }
    |
help: Add trailing comma
319 | # ==> multiline_bad_or_dict.py <==
320 | multiline_bad_or_dict = {
321 |     "good": True or False,
    -     "bad": 123
322 +     "bad": 123,
323 | }
324 | 
325 | multiline_bad_dict_one_element = {

COM812 [*] Trailing comma missing
   --> COM81.py:326:15
    |
325 | multiline_bad_dict_one_element = {
326 |     "bad": 123
    |               ^
327 | }
    |
help: Add trailing comma
323 | }
324 | 
325 | multiline_bad_dict_one_element = {
    -     "bad": 123
326 +     "bad": 123,
327 | }
328 | 
329 | # ==> multiline_good_dict.py <==

COM812 [*] Trailing comma missing
   --> COM81.py:372:15
    |
370 | multiline_index_access[
371 |     "probably fine",
372 |     "not good"
    |               ^
373 | ]
    |
help: Add trailing comma
369 | 
370 | multiline_index_access[
371 |     "probably fine",
    -     "not good"
372 +     "not good",
373 | ]
374 | 
375 | multiline_index_access[

COM812 [*] Trailing comma missing
   --> COM81.py:379:15
    |
377 |     "fine",
378 |     :
379 |     "not good"
    |               ^
380 | ]
    |
help: Add trailing comma
376 |     "fine",
377 |     "fine",
378 |     :
    -     "not good"
379 +     "not good",
380 | ]
381 | 
382 | # ==> multiline_string.py <==

COM812 [*] Trailing comma missing
   --> COM81.py:408:15
    |
406 |     "fine"
407 |     :
408 |     "not fine"
    |               ^
409 | ]
    |
help: Add trailing comma
405 |     "fine",
406 |     "fine"
407 |     :
    -     "not fine"
408 +     "not fine",
409 | ]
410 | 
411 | multiline_index_access[

COM812 [*] Trailing comma missing
   --> COM81.py:436:15
    |
434 |     :
435 |     "fine",
436 |     "not fine"
    |               ^
437 | ]
    |
help: Add trailing comma
433 |     "fine"
434 |     :
435 |     "fine",
    -     "not fine"
436 +     "not fine",
437 | ]
438 | 
439 | multiline_index_access[

COM812 [*] Trailing comma missing
   --> COM81.py:523:13
    |
521 |     foo,
522 |     bar,
523 |     **kwargs
    |             ^
524 | ):
525 |     pass
    |
help: Add trailing comma
520 | def function(
521 |     foo,
522 |     bar,
    -     **kwargs
523 +     **kwargs,
524 | ):
525 |     pass
526 | 

COM812 [*] Trailing comma missing
   --> COM81.py:530:10
    |
528 |     foo,
529 |     bar,
530 |     *args
    |          ^
531 | ):
532 |     pass
    |
help: Add trailing comma
527 | def function(
528 |     foo,
529 |     bar,
    -     *args
530 +     *args,
531 | ):
532 |     pass
533 | 

COM812 [*] Trailing comma missing
   --> COM81.py:538:16
    |
536 |     bar,
537 |     *args,
538 |     extra_kwarg
    |                ^
539 |     ):
540 |     pass
    |
help: Add trailing comma
535 |     foo,
536 |     bar,
537 |     *args,
    -     extra_kwarg
538 +     extra_kwarg,
539 |     ):
540 |     pass
541 | 

COM812 [*] Trailing comma missing
   --> COM81.py:545:13
    |
543 |     foo,
544 |     bar,
545 |     **kwargs
    |             ^
546 | )
    |
help: Add trailing comma
542 | result = function(
543 |     foo,
544 |     bar,
    -     **kwargs
545 +     **kwargs,
546 | )
547 | 
548 | result = function(

COM812 [*] Trailing comma missing
   --> COM81.py:551:24
    |
549 |     foo,
550 |     bar,
551 |     **not_called_kwargs
    |                        ^
552 | )
    |
help: Add trailing comma
548 | result = function(
549 |     foo,
550 |     bar,
    -     **not_called_kwargs
551 +     **not_called_kwargs,
552 | )
553 | 
554 | def foo(

COM812 [*] Trailing comma missing
   --> COM81.py:558:15
    |
556 |     spam,
557 |     *args,
558 |     kwarg_only
    |               ^
559 |     ):
560 |     pass
    |
help: Add trailing comma
555 |     ham,
556 |     spam,
557 |     *args,
    -     kwarg_only
558 +     kwarg_only,
559 |     ):
560 |     pass
561 | 

COM812 [*] Trailing comma missing
   --> COM81.py:569:13
    |
568 | {
569 |     **kwargs
    |             ^
570 | }
    |
help: Add trailing comma
566 | )
567 | 
568 | {
    -     **kwargs
569 +     **kwargs,
570 | }
571 | 
572 | {

COM812 [*] Trailing comma missing
   --> COM81.py:573:10
    |
572 | {
573 |     *args
    |          ^
574 | }
    |
help: Add trailing comma
570 | }
571 | 
572 | {
    -     *args
573 +     *args,
574 | }
575 | 
576 | [

COM812 [*] Trailing comma missing
   --> COM81.py:577:10
    |
576 | [
577 |     *args
    |          ^
578 | ]
    |
help: Add trailing comma
574 | }
575 | 
576 | [
    -     *args
577 +     *args,
578 | ]
579 | 
580 | def foo(

COM812 [*] Trailing comma missing
   --> COM81.py:583:10
    |
581 |     ham,
582 |     spam,
583 |     *args
    |          ^
584 |     ):
585 |     pass
    |
help: Add trailing comma
580 | def foo(
581 |     ham,
582 |     spam,
    -     *args
583 +     *args,
584 |     ):
585 |     pass
586 | 

COM812 [*] Trailing comma missing
   --> COM81.py:590:13
    |
588 |     ham,
589 |     spam,
590 |     **kwargs
    |             ^
591 |     ):
592 |     pass
    |
help: Add trailing comma
587 | def foo(
588 |     ham,
589 |     spam,
    -     **kwargs
590 +     **kwargs,
591 |     ):
592 |     pass
593 | 

COM812 [*] Trailing comma missing
   --> COM81.py:598:15
    |
596 |     spam,
597 |     *args,
598 |     kwarg_only
    |               ^
599 |     ):
600 |     pass
    |
help: Add trailing comma
595 |     ham,
596 |     spam,
597 |     *args,
    -     kwarg_only
598 +     kwarg_only,
599 |     ):
600 |     pass
601 | 

COM812 [*] Trailing comma missing
   --> COM81.py:627:20
    |
625 |     foo,
626 |     bar,
627 |     **{'ham': spam}
    |                    ^
628 | )
    |
help: Add trailing comma
624 | result = function(
625 |     foo,
626 |     bar,
    -     **{'ham': spam}
627 +     **{'ham': spam},
628 | )
629 | 
630 | # Make sure the COM812 and UP034 rules don't fix simultaneously and cause a syntax error.

COM812 [*] Trailing comma missing
   --> COM81.py:647:49
    |
646 | raise Exception(
647 |     "first", extra=f"Add trailing comma here ->"
    |                                                 ^
648 | )
    |
help: Add trailing comma
644 | kwargs.pop("remove", f"this {trailing_comma}",)
645 | 
646 | raise Exception(
    -     "first", extra=f"Add trailing comma here ->"
647 +     "first", extra=f"Add trailing comma here ->",
648 | )
649 | 
650 | assert False, f"<- This is not a trailing comma"

COM812 [*] Trailing comma missing
   --> COM81.py:659:6
    |
658 | type X[
659 |     T
    |      ^
660 | ] = T
661 | def f[
    |
help: Add trailing comma
656 | }"""
657 | 
658 | type X[
    -     T
659 +     T,
660 | ] = T
661 | def f[
662 |     T

COM812 [*] Trailing comma missing
   --> COM81.py:662:6
    |
660 | ] = T
661 | def f[
662 |     T
    |      ^
663 | ](): pass
664 | class C[
    |
help: Add trailing comma
659 |     T
660 | ] = T
661 | def f[
    -     T
662 +     T,
663 | ](): pass
664 | class C[
665 |     T

COM812 [*] Trailing comma missing
   --> COM81.py:665:6
    |
663 | ](): pass
664 | class C[
665 |     T
    |      ^
666 | ]: pass
    |
help: Add trailing comma
662 |     T
663 | ](): pass
664 | class C[
    -     T
665 +     T,
666 | ]: pass
667 | 
668 | type X[T,] = T
