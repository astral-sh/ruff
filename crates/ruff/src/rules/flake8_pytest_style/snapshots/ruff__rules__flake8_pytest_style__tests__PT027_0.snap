---
source: crates/ruff/src/rules/flake8_pytest_style/mod.rs
---
PT027_0.py:6:14: PT027 [*] Use `pytest.raises` instead of unittest-style `assertRaises`
  |
4 | class Test(unittest.TestCase):
5 |     def test_errors(self):
6 |         with self.assertRaises(ValueError):
  |              ^^^^^^^^^^^^^^^^^ PT027
7 |             raise ValueError
  |
  = help: Replace `assertRaises` with `pytest.raises`

ℹ Suggested fix
1 1 | import unittest
  2 |+import pytest
2 3 | 
3 4 | 
4 5 | class Test(unittest.TestCase):
5 6 |     def test_errors(self):
6   |-        with self.assertRaises(ValueError):
  7 |+        with pytest.raises(ValueError):
7 8 |             raise ValueError
8 9 | 
9 10 |         with self.assertRaises(expected_exception=ValueError):

PT027_0.py:9:14: PT027 [*] Use `pytest.raises` instead of unittest-style `assertRaises`
   |
 7 |             raise ValueError
 8 | 
 9 |         with self.assertRaises(expected_exception=ValueError):
   |              ^^^^^^^^^^^^^^^^^ PT027
10 |             raise ValueError
   |
   = help: Replace `assertRaises` with `pytest.raises`

ℹ Suggested fix
1  1  | import unittest
   2  |+import pytest
2  3  | 
3  4  | 
4  5  | class Test(unittest.TestCase):
--------------------------------------------------------------------------------
6  7  |         with self.assertRaises(ValueError):
7  8  |             raise ValueError
8  9  | 
9     |-        with self.assertRaises(expected_exception=ValueError):
   10 |+        with pytest.raises(ValueError):
10 11 |             raise ValueError
11 12 | 
12 13 |         with self.assertRaisesRegex(ValueError, expected_regex="test"):

PT027_0.py:12:14: PT027 [*] Use `pytest.raises` instead of unittest-style `assertRaisesRegex`
   |
10 |             raise ValueError
11 | 
12 |         with self.assertRaisesRegex(ValueError, expected_regex="test"):
   |              ^^^^^^^^^^^^^^^^^^^^^^ PT027
13 |             raise ValueError("test")
   |
   = help: Replace `assertRaisesRegex` with `pytest.raises`

ℹ Suggested fix
1  1  | import unittest
   2  |+import pytest
2  3  | 
3  4  | 
4  5  | class Test(unittest.TestCase):
--------------------------------------------------------------------------------
9  10 |         with self.assertRaises(expected_exception=ValueError):
10 11 |             raise ValueError
11 12 | 
12    |-        with self.assertRaisesRegex(ValueError, expected_regex="test"):
   13 |+        with pytest.raises(ValueError, match="test"):
13 14 |             raise ValueError("test")
14 15 | 
15 16 |         with self.assertRaisesRegex(

PT027_0.py:15:14: PT027 [*] Use `pytest.raises` instead of unittest-style `assertRaisesRegex`
   |
13 |             raise ValueError("test")
14 | 
15 |         with self.assertRaisesRegex(
   |              ^^^^^^^^^^^^^^^^^^^^^^ PT027
16 |             expected_exception=ValueError, expected_regex="test"
17 |         ):
   |
   = help: Replace `assertRaisesRegex` with `pytest.raises`

ℹ Suggested fix
1  1  | import unittest
   2  |+import pytest
2  3  | 
3  4  | 
4  5  | class Test(unittest.TestCase):
--------------------------------------------------------------------------------
12 13 |         with self.assertRaisesRegex(ValueError, expected_regex="test"):
13 14 |             raise ValueError("test")
14 15 | 
15    |-        with self.assertRaisesRegex(
16    |-            expected_exception=ValueError, expected_regex="test"
17    |-        ):
   16 |+        with pytest.raises(ValueError, match="test"):
18 17 |             raise ValueError("test")
19 18 | 
20 19 |         with self.assertRaisesRegex(

PT027_0.py:20:14: PT027 [*] Use `pytest.raises` instead of unittest-style `assertRaisesRegex`
   |
18 |             raise ValueError("test")
19 | 
20 |         with self.assertRaisesRegex(
   |              ^^^^^^^^^^^^^^^^^^^^^^ PT027
21 |             expected_regex="test", expected_exception=ValueError
22 |         ):
   |
   = help: Replace `assertRaisesRegex` with `pytest.raises`

ℹ Suggested fix
1  1  | import unittest
   2  |+import pytest
2  3  | 
3  4  | 
4  5  | class Test(unittest.TestCase):
--------------------------------------------------------------------------------
17 18 |         ):
18 19 |             raise ValueError("test")
19 20 | 
20    |-        with self.assertRaisesRegex(
21    |-            expected_regex="test", expected_exception=ValueError
22    |-        ):
   21 |+        with pytest.raises(ValueError, match="test"):
23 22 |             raise ValueError("test")
24 23 | 
25 24 |         with self.failUnlessRaises(ValueError):

PT027_0.py:25:14: PT027 [*] Use `pytest.raises` instead of unittest-style `failUnlessRaises`
   |
23 |             raise ValueError("test")
24 | 
25 |         with self.failUnlessRaises(ValueError):
   |              ^^^^^^^^^^^^^^^^^^^^^ PT027
26 |             raise ValueError
   |
   = help: Replace `failUnlessRaises` with `pytest.raises`

ℹ Suggested fix
1  1  | import unittest
   2  |+import pytest
2  3  | 
3  4  | 
4  5  | class Test(unittest.TestCase):
--------------------------------------------------------------------------------
22 23 |         ):
23 24 |             raise ValueError("test")
24 25 | 
25    |-        with self.failUnlessRaises(ValueError):
   26 |+        with pytest.raises(ValueError):
26 27 |             raise ValueError
27 28 | 
28 29 |     def test_unfixable_error(self):

PT027_0.py:29:14: PT027 Use `pytest.raises` instead of unittest-style `assertRaises`
   |
28 |     def test_unfixable_error(self):
29 |         with self.assertRaises(ValueError, msg="msg"):
   |              ^^^^^^^^^^^^^^^^^ PT027
30 |             raise ValueError
   |
   = help: Replace `assertRaises` with `pytest.raises`

PT027_0.py:32:14: PT027 Use `pytest.raises` instead of unittest-style `assertRaises`
   |
30 |             raise ValueError
31 | 
32 |         with self.assertRaises(
   |              ^^^^^^^^^^^^^^^^^ PT027
33 |             # comment
34 |             ValueError
   |
   = help: Replace `assertRaises` with `pytest.raises`

PT027_0.py:39:13: PT027 Use `pytest.raises` instead of unittest-style `assertRaises`
   |
38 |           with (
39 |               self
   |  _____________^
40 | |             # comment
41 | |             .assertRaises
   | |_________________________^ PT027
42 |               # comment
43 |               (ValueError)
   |
   = help: Replace `assertRaises` with `pytest.raises`


